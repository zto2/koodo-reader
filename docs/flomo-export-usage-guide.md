# Koodo Reader flomo 导出功能使用指南

## 功能概述

flomo 导出功能允许用户将 Koodo Reader 中的笔记和高亮内容直接导出到 flomo 笔记应用中，提升知识管理工作流效率。

## 第一阶段功能

### 已实现功能

1. **核心导出功能**
   - 单条笔记导出到 flomo
   - 单条高亮导出到 flomo
   - 批量导出（带进度显示）
   - 选中文本直接导出到 flomo

2. **设置界面**
   - flomo API URL 配置
   - 启用/禁用开关
   - 导出格式选择（仅内容/包含书籍信息/包含章节信息）
   - 连接测试功能
   - 每日使用统计显示
   - 高级设置（时间戳、高亮颜色、标签前缀）

3. **用户界面集成**
   - 导出子菜单中的 flomo 选项
   - 阅读界面弹出菜单中的 flomo 选项
   - 设置对话框中的 flomo 配置区域

4. **错误处理和限制**
   - 每日 100 次导出限制检查
   - 网络连接状态检查
   - API URL 格式验证
   - 内容长度限制（5000 字符）
   - 详细的错误提示和用户反馈

## 使用方法

### 1. 配置 flomo API

1. 打开 Koodo Reader 设置
2. 在"常规"标签页中找到"flomo 集成设置"
3. 勾选"启用 flomo 导出"
4. 获取 flomo API URL：
   - 访问 [flomo 网页版](https://flomoapp.com/mine?source=incoming_webhook)
   - 需要 Pro 会员权限
   - 在 API 设置中复制 Incoming Webhook URL
5. 将 API URL 粘贴到配置框中
6. 点击"测试连接"验证配置

### 2. 导出笔记和高亮

#### 方法一：从导出菜单
1. 在书籍详情页面，点击导出按钮
2. 选择"Export Notes to flomo"或"Export Highlights to flomo"
3. 系统会批量导出所有笔记或高亮

#### 方法二：从阅读界面
1. 在阅读时选中任意文本
2. 在弹出菜单中点击 flomo 图标
3. 选中的文本会作为高亮导出到 flomo

### 3. 导出格式设置

在设置中可以选择三种导出格式：

- **仅内容**：只导出笔记/高亮的文本内容
- **包含书籍信息**：包含书名和作者信息
- **包含章节信息**：包含书名、作者和章节信息

### 4. 高级设置

- **包含时间戳**：在导出内容中添加创建日期
- **包含高亮颜色**：显示高亮的颜色信息
- **标签前缀**：自定义 flomo 标签前缀（默认：#读书笔记）

## 使用限制

1. **每日限制**：flomo API 限制每日 100 次调用
2. **内容长度**：单条笔记最大 5000 字符
3. **网络要求**：需要网络连接才能导出
4. **会员要求**：需要 flomo Pro 会员才能使用 API 功能

## 导出内容格式示例

### 笔记导出格式
```
《书名》- 作者名

📝 第X章：章节名

笔记内容

> 原文高亮内容

📅 2024-01-01

🎨 浅黄色

#读书笔记 #书名
```

### 高亮导出格式
```
《书名》- 作者名

📖 第X章：章节名

> 高亮文本内容

📅 2024-01-01

🎨 浅蓝色

#高亮摘录 #书名
```

## 故障排除

### 常见问题

1. **"请先配置 flomo 设置"**
   - 检查是否已启用 flomo 导出
   - 确认 API URL 格式正确

2. **"已达到每日导出限制"**
   - 每日限制 100 次，次日零点重置
   - 可在设置中查看当前使用情况

3. **"连接测试失败"**
   - 检查网络连接
   - 确认 API URL 正确
   - 验证 flomo Pro 会员状态

4. **"导出失败"**
   - 检查内容是否超过 5000 字符
   - 确认网络连接稳定
   - 重试导出操作

### API URL 格式要求

正确格式：`https://flomoapp.com/iwh/用户ID/密钥/`

示例：`https://flomoapp.com/iwh/abc123/def456/`

## 技术支持

如遇到问题，请检查：
1. flomo Pro 会员状态
2. API URL 格式和有效性
3. 网络连接状态
4. 每日使用限制

更多帮助请参考 [flomo 官方文档](https://help.flomoapp.com/)。
